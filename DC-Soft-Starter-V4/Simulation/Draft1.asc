Version 4
SHEET 1 1688 916
WIRE 80 112 32 112
WIRE 176 112 160 112
WIRE 288 112 256 112
WIRE 448 112 352 112
WIRE 576 112 448 112
WIRE 576 128 576 112
WIRE 800 128 576 128
WIRE 912 128 880 128
WIRE 32 160 32 112
WIRE 448 208 448 112
WIRE 576 208 576 192
WIRE 672 208 576 208
WIRE 800 208 752 208
WIRE 912 208 880 208
WIRE 32 272 32 240
WIRE 208 272 32 272
WIRE 576 304 576 288
WIRE 688 304 576 304
WIRE 688 320 688 304
WIRE 528 384 528 368
WIRE 688 400 688 384
WIRE 688 400 576 400
WIRE 208 416 208 272
WIRE 448 416 448 272
WIRE 448 416 208 416
WIRE 560 416 448 416
WIRE 576 416 576 400
WIRE 576 416 560 416
WIRE 1376 528 1184 528
WIRE 1184 608 1184 528
WIRE 1152 624 1056 624
WIRE 1248 640 1216 640
WIRE 1152 656 1104 656
WIRE 1296 672 1248 672
WIRE 1376 672 1376 528
WIRE 1456 672 1376 672
WIRE 1600 672 1456 672
WIRE 1296 688 1296 672
WIRE 1104 720 1104 656
WIRE 1248 720 1248 672
WIRE 1248 720 1104 720
WIRE 1056 784 1056 624
WIRE 1056 896 1056 864
FLAG 1056 896 0
FLAG 1296 768 0
FLAG 1184 672 0
FLAG 1600 752 0
FLAG 1248 640 gate
FLAG 528 368 gate
FLAG 560 416 0
FLAG 880 336 0
FLAG 1200 336 0
FLAG 1456 672 12
SYMBOL voltage 32 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 116 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V1
SYMATTR Value 230
SYMBOL nmos 528 304 R0
SYMATTR InstName M1
SYMATTR Value R6020PNJ
SYMBOL voltage 1056 768 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 12 0 0.0025 0.0025 0 0.002)
SYMBOL voltage 1296 672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 12 0 1 1 5 2)
SYMBOL Opamps\\LT1001 1184 576 R0
SYMATTR InstName U1
SYMBOL voltage 1600 656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 12
SYMBOL diode 592 192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value RFUH30TS6S
SYMBOL ind 896 112 R0
SYMATTR InstName L1
SYMATTR Value 20m
SYMBOL ind 176 96 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L2
SYMATTR Value 0.6624m
SYMBOL res 272 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1.75
SYMBOL ind 560 192 R0
SYMATTR InstName L3
SYMATTR Value 350n
SYMBOL res 896 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 0.2
SYMBOL voltage 768 208 R90
WINDOW 123 0 0 Left 0
WINDOW 39 24 116 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V_SENSE_1
SYMATTR Value 0
SYMBOL ind 1056 320 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L4
SYMATTR Value 10000000n
SYMBOL res 1136 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 300n
SYMBOL voltage 1104 336 R270
WINDOW 123 0 0 Left 0
WINDOW 39 24 116 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V_SENSE_2
SYMATTR Value 0
SYMBOL bv 896 208 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName back_emf
SYMATTR Value V=I(V_SENSE_2)*3200
SYMBOL bv 976 336 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V_Torque
SYMATTR Value V=I(V_SENSE_1)*50u
SYMBOL cap 432 208 R0
SYMATTR InstName C1
SYMATTR Value 1500µ
SYMATTR SpiceLine V=500
SYMBOL diode 288 128 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value RFUH60TS6D
SYMBOL cap 672 320 R0
SYMATTR InstName C2
SYMATTR Value 100n
TEXT 0 440 Left 2 !.tran 0 1 0
TEXT 296 232 Left 2 !.ic I(L1)=0 I(L2)=0 V(C1)=230 I(L3)=0
TEXT -176 248 Left 2 !.ic v(n004)=230
